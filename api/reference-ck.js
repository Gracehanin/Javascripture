/*globals javascripture bible*/javascripture.api.reference={getThreeChapters:function(e){var t=this,n=e.book,r=e.chapter,i=e.verse,s=t.getOffsetChapter(e,-1),o=t.getOffsetChapter(e,1),u='<div class="three-references"';s.book&&(u+=" data-prev='"+JSON.stringify(s)+"'");o.book&&(u+=" data-next='"+JSON.stringify(o)+"'");u+=">";s.book&&(u+=javascripture.api.reference.getChapterText(s));u+=javascripture.api.reference.getChapterText(e);o.book&&(u+=javascripture.api.reference.getChapterText(o));u+="</div>";return u},getChapterText:function(e){var t=this,n=e.book,r=e.chapter,i=e.verse,s=r-1,o=i-1,u=!1,a='<div class="reference frequencyAnalysis" data-book="'+n+'" data-chapter="'+r+'"><h1>'+n+" "+r+"</h1>";a+='<ol class="wrapper">';var f,l;if(javascripture.data.hebrew[n]){f=javascripture.data.hebrew;testament="hebrew"}else{f=javascripture.data.greek;testament="greek"}javascripture.data.english[n][s]&&javascripture.data.english[n][s].forEach(function(e,i){a+='<li id="'+n.replace(/ /gi,"_")+"_"+r+"_"+(i+1)+'"';i===o&&(a+=' class="current"');a+='data-verse="'+(i+1)+'">';a+='<div class="wrapper"';i===o&&(a+=' id="current"');if(i===o-5){a+=' id="context"';u=!0}a+=">";a+='<div class="english">';javascripture.modules.versionSelector.getVersion()==="lc"?f[n][s][i].forEach(function(e,n){e&&(a+=t.createWordString(e,"english",testament))}):javascripture.data.english[n][s][i].forEach(function(e,n){e&&(a+=t.createWordString(e,"english",testament))});a+="</div>";if(f[n]&&f[n][s][i]){a+="<div class='original "+testament+"'>";f[n][s][i].forEach(function(e,n){e&&(a+=t.createWordString(e,testament,testament))});a+="</div>"}a+="</div>";a+="</li>"});a+="</ol>";a+="</div>";return a},createWordString:function(e,t,n){var r=this,i="",s=[];if(typeof e[1]=="undefined")return"<span>"+e[0]+"</span> ";lemma=e[1];if(lemma){lemmaArray=lemma.split(" ");lemmaArray.forEach(function(e,t){s.push(javascripture.modules.reference.getFamily(e))})}i+="<span";i+=' class="'+s.join(" ")+'"';i+=' title="'+lemma;e[2]&&(i+=" "+e[2]);i+='"';i+=' data-word="'+e[0]+'"';i+=' data-lemma="'+e[1]+'"';i+=' data-language="'+n+'"';i+=' data-range="verse"';i+=' data-family="'+s.join(" ")+'"';e[2]&&(i+=' data-morph="'+e[2]+'"');i+=">";javascripture.modules.versionSelector.getVersion()==="lc"&&t==="english"?i+=javascripture.modules.translateLiterally.getWord(e):i+=e[0];i+="</span> ";return i},getOffsetChapter:function(e,t){var n=e.book,r=e.chapter,i={},s=parseInt(r,10)+t,o=s-1,u;if(javascripture.data.english[n]&&javascripture.data.english[n][o]!==undefined){i.book=n;i.chapter=s}else bible.Data.books.forEach(function(e,r){if(e[0]===n){u=r+t;if(bible.Data.books[u]!==undefined){i.book=bible.Data.books[u][0];t>0?i.chapter=1:i.chapter=bible.Data.verses[u].length}}});return i}};