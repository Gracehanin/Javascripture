/*globals javascripture*/javascripture.api.reference={getThreeChapters:function(e){var t=this,n=e.book,r=e.chapter,i=e.verse,s=t.getOffsetChapter(e,-1),o=t.getOffsetChapter(e,1);threeChapters='<div class="three-references"';s.book&&(threeChapters+=" data-prev='"+JSON.stringify(s)+"'");o.book&&(threeChapters+=" data-next='"+JSON.stringify(o)+"'");threeChapters+=">";s.book&&(threeChapters+=javascripture.api.reference.getChapterText(s));threeChapters+=javascripture.api.reference.getChapterText(e);o.book&&(threeChapters+=javascripture.api.reference.getChapterText(o));threeChapters+="</div>";console.log(threeChapters);return threeChapters},getChapterText:function(e){var t=this,n=e.book,r=e.chapter,i=e.verse,s=r-1,o=i-1,u=!1,a='<div class="reference frequencyAnalysis" data-book="'+n+'" data-chapter="'+r+'"><h1>'+n+" "+r+"</h1>";a+='<ol class="wrapper">';var f,l;if(javascripture.data.hebrew[n]){f=javascripture.data.hebrew;testament="hebrew"}else{f=javascripture.data.greek;testament="greek"}javascripture.data.english[n][s]&&$.each(javascripture.data.english[n][s],function(e,i){a+='<li id="'+n.replace(/ /gi,"_")+"_"+r+"_"+(e+1)+'"';e===o&&(a+=' class="current"');a+='data-verse="'+(e+1)+'">';a+='<div class="wrapper"';e===o&&(a+=' id="current"');if(e===o-5){a+=' id="context"';u=!0}a+=">";a+='<div class="english">';javascripture.modules.versionSelector.getVersion()==="lc"?$.each(f[n][s][e],function(e,n){n&&(a+=t.createWordString(n,"english",testament))}):$.each(javascripture.data.english[n][s][e],function(e,n){n&&(a+=t.createWordString(n,"english",testament))});a+="</div>";if(f[n]&&f[n][s][e]){a+="<div class='original "+testament+"'>";$.each(f[n][s][e],function(e,n){n&&(a+=t.createWordString(n,testament,testament))});a+="</div>"}a+="</div>";a+="</li>"});a+="</ol>";a+="</div>";return a},createWordString:function(e,t,n){var r=this,i="",s=[];if(typeof e[1]=="undefined")return"<span>"+e[0]+"</span> ";lemma=e[1];if(lemma){lemmaArray=lemma.split(" ");$.each(lemmaArray,function(e,t){s.push(javascripture.modules.reference.getFamily(t))})}i+="<span";i+=' class="'+s.join(" ")+'"';i+=' title="'+lemma;e[2]&&(i+=" "+e[2]);i+='"';i+=' data-word="'+e[0]+'"';i+=' data-lemma="'+e[1]+'"';i+=' data-language="'+n+'"';i+=' data-range="verse"';i+=' data-family="'+s.join(" ")+'"';e[2]&&(i+=' data-morph="'+e[2]+'"');i+=">";javascripture.modules.versionSelector.getVersion()==="lc"&&t==="english"?i+=javascripture.modules.translateLiterally.getWord(e):i+=e[0];i+="</span> ";return i},getOffsetChapter:function(e,t){var n=e.book,r=e.chapter,i={},s=parseInt(r,10)+t,o=s-1,u;if(javascripture.data.english[n]&&javascripture.data.english[n][o]!==undefined){i.book=n;i.chapter=s}else $.each(bible.Data.books,function(e,r){if(r[0]===n){u=e+t;if(bible.Data.books[u]!==undefined){i.book=bible.Data.books[u][0];t>0?i.chapter=1:i.chapter=bible.Data.verses[u].length}}});return i}};