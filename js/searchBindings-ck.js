/*global colors*/(function(e){function t(t){var s=new Date,o="",u=t.lemma.replace(/ /gi,""),a=r(t,"_");i(t);strongsNumberArray=t.lemma.split(" ");o+='<form><ol class="references">';var f=0,l=bibleObject;if(e("select[name=searchLanguage]").val()==="hebrew"){l=hebrewObject;e.each(strongsNumberArray,function(e,t){parseFloat(t.substring(1,t.length))>0&&(strongsNumberArray[e]=t.substring(2,t.length))})}var c=searchApi.getReferences(t);o+=n(c);o+="</ol></form>";e("#referenceTracking .collapsable").addClass("closed");e("#referenceTracking #"+a).removeClass("closed");e("#referenceTracking #"+a+" form").length<=0&&e("#referenceTracking #"+a).append(o);goToFirstReference();var h=new Date;timer(s,h)}function r(e,t){var n="";e.word&&(n+=e.word.replace(/ /gi,t));e.lemma&&(n+=t+e.lemma.replace(/ /gi,t));e.morph&&(n+=t+e.morph.replace(/ /gi,t));return n}function i(t,n){var i=r(t,"_"),s="";if(e("#"+i).length===0){var o=r(t," "),u=reference.getFamily(t.lemma),a=parseFloat(u.substring(1,u.length),10);s+='<div class="collapsable" id="'+i+'" class="'+u+'"><style></style><h2 class="'+u+'">'+o;s+='<a aria-hidden="true" class="icon-close remove"></a></h2></div>';e("#referenceTracking").append(s);if(t.lemma){var f="";if(a>0){var l=colors.getStrongsColor(a);f=colors.getStrongsStyle(u,l)}if(a>0){e("#"+i+" style").html(f);e("#changeColor #colorFormStrongsNumber").val(t.lemma);var c=e("#"+i+" ."+t.lemma).css("background-color");e("#changeColor #colorFormColor").val(c)}}}}function s(e){var t=e.book,n=e.chapter,r=e.verse;return'<li><a href="#book='+t+"&chapter="+n+"&verse="+r+'">'+t+" "+n+":"+r+"</a></li>"}e.fn.serializeObject=function(){var t={},n=this.serializeArray();e.each(n,function(){if(t[this.name]!==undefined){t[this.name].push||(t[this.name]=[t[this.name]]);t[this.name].push(this.value||"")}else t[this.name]=this.value||""});return t};var n=function(t){var n="";e.each(t,function(e,t){n+=s(t)});return n};e(document).on("dblclick","#verse ol > li span",function(){var n=e(this).data();n.word="";n.morph="";t(n)});e("form.search").submit(function(n){n.preventDefault();t(e(this).serializeObject())});e(document).on("click","a.word-tree",function(n){n.preventDefault();t(e(this).data())})})(jQuery);