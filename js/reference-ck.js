/*globals javascripture*/(function(e){var t=javascripture.data.english;e.fn.scrollStopped=function(t){e(this).scroll(function(){var n=this,r=e(n);r.data("scrollTimeout")&&clearTimeout(r.data("scrollTimeout"));r.data("scrollTimeout",setTimeout(t,250,n))})};javascripture.modules.reference.loadReferenceFromHash();e(window).bind("hashchange",function(e){var t=new Date;javascripture.modules.reference.loadReferenceFromHash();var n=new Date;timer(t,n)});e(window).scrollStopped(function(){var t=e(document).scrollTop(),n=e(".referencePanel").height()-e(window).height(),r;console.log(n);console.log(t);if(t<=0){console.log("prev");var i=e(".three-references").data("prev");r=javascripture.modules.reference.getAnchoringData("prev");javascripture.modules.reference.load(i).anchorReference(r)}if(t>=n){console.log("next");var s=e(".three-references").data("next");r=javascripture.modules.reference.getAnchoringData("next");javascripture.modules.reference.load(s).anchorReference(r)}});e(".goToReference").submit(function(t){t.preventDefault();console.log(e("#goToReference").val());var n=bible.parseReference(e("#goToReference").val()),r="book="+bible.Data.books[n.bookID-1][0]+"&chapter="+n.chapter+"&verse="+n.verse;console.log(r);window.location.hash=r;e(this).closest(".popup").popup("close");e("#goToReference").blur();e("html").hasClass("reading-mode")&&hideDock();return!1})})(jQuery);